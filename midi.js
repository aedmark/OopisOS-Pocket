/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/midi-file-parser@1.0.0/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
function MidiFile(e){function t(e){var t=e.read(4),r=e.readInt32();return{id:t,length:r,data:e.read(r)}}var r;function n(e){var t={};t.deltaTime=e.readVarInt();var n,a=e.readInt8();if(!(240&~a)){if(255==a){t.type="meta";var u=e.readInt8(),d=e.readVarInt();switch(u){case 0:if(t.subtype="sequenceNumber",2!=d)throw"Expected length for sequenceNumber event is 2, got "+d;return t.number=e.readInt16(),t;case 1:return t.subtype="text",t.text=e.read(d),t;case 2:return t.subtype="copyrightNotice",t.text=e.read(d),t;case 3:return t.subtype="trackName",t.text=e.read(d),t;case 4:return t.subtype="instrumentName",t.text=e.read(d),t;case 5:return t.subtype="lyrics",t.text=e.read(d),t;case 6:return t.subtype="marker",t.text=e.read(d),t;case 7:return t.subtype="cuePoint",t.text=e.read(d),t;case 32:if(t.subtype="midiChannelPrefix",1!=d)throw"Expected length for midiChannelPrefix event is 1, got "+d;return t.channel=e.readInt8(),t;case 47:if(t.subtype="endOfTrack",0!=d)throw"Expected length for endOfTrack event is 0, got "+d;return t;case 81:if(t.subtype="setTempo",3!=d)throw"Expected length for setTempo event is 3, got "+d;return t.microsecondsPerBeat=(e.readInt8()<<16)+(e.readInt8()<<8)+e.readInt8(),t;case 84:if(t.subtype="smpteOffset",5!=d)throw"Expected length for smpteOffset event is 5, got "+d;var o=e.readInt8();return t.frameRate={0:24,32:25,64:29,96:30}[96&o],t.hour=31&o,t.min=e.readInt8(),t.sec=e.readInt8(),t.frame=e.readInt8(),t.subframe=e.readInt8(),t;case 88:if(t.subtype="timeSignature",4!=d)throw"Expected length for timeSignature event is 4, got "+d;return t.numerator=e.readInt8(),t.denominator=Math.pow(2,e.readInt8()),t.metronome=e.readInt8(),t.thirtyseconds=e.readInt8(),t;case 89:if(t.subtype="keySignature",2!=d)throw"Expected length for keySignature event is 2, got "+d;return t.key=e.readInt8(!0),t.scale=e.readInt8(),t;case 127:return t.subtype="sequencerSpecific",t.data=e.read(d),t;default:return t.subtype="unknown",t.data=e.read(d),t}return t.data=e.read(d),t}if(240==a){t.type="sysEx";d=e.readVarInt();return t.data=e.read(d),t}if(247==a){t.type="dividedSysEx";d=e.readVarInt();return t.data=e.read(d),t}throw"Unrecognised MIDI event type byte: "+a}128&a?(n=e.readInt8(),r=a):(n=a,a=r);var s=a>>4;switch(t.channel=15&a,t.type="channel",s){case 8:return t.subtype="noteOff",t.noteNumber=n,t.velocity=e.readInt8(),t;case 9:return t.noteNumber=n,t.velocity=e.readInt8(),0==t.velocity?t.subtype="noteOff":t.subtype="noteOn",t;case 10:return t.subtype="noteAftertouch",t.noteNumber=n,t.amount=e.readInt8(),t;case 11:return t.subtype="controller",t.controllerType=n,t.value=e.readInt8(),t;case 12:return t.subtype="programChange",t.programNumber=n,t;case 13:return t.subtype="channelAftertouch",t.amount=n,t;case 14:return t.subtype="pitchBend",t.value=n+(e.readInt8()<<7),t;default:throw"Unrecognised MIDI event type: "+s}}stream=Stream(e);var a=t(stream);if("MThd"!=a.id||6!=a.length)throw"Bad .mid file - header not found";var u=Stream(a.data),d=u.readInt16(),o=u.readInt16(),s=u.readInt16();if(32768&s)throw"Expressing time division in SMTPE frames is not supported yet";ticksPerBeat=s;for(var c={formatType:d,trackCount:o,ticksPerBeat:ticksPerBeat},i=[],f=0;f<c.trackCount;f++){i[f]=[];var p=t(stream);if("MTrk"!=p.id)throw"Unexpected chunk - expected MTrk, got "+p.id;for(var h=Stream(p.data);!h.eof();){var m=n(h);i[f].push(m)}}return{header:c,tracks:i}}function Stream(e){var t=0;function r(r){var n=e.charCodeAt(t);return r&&n>127&&(n-=256),t+=1,n}return{eof:function(){return t>=e.length},read:function(r){var n=e.substr(t,r);return t+=r,n},readInt32:function(){var r=(e.charCodeAt(t)<<24)+(e.charCodeAt(t+1)<<16)+(e.charCodeAt(t+2)<<8)+e.charCodeAt(t+3);return t+=4,r},readInt16:function(){var r=(e.charCodeAt(t)<<8)+e.charCodeAt(t+1);return t+=2,r},readInt8:r,readVarInt:function(){for(var e=0;;){var t=r();if(!(128&t))return e+t;e+=127&t,e<<=7}}}}module.exports=function(e){return MidiFile(e)};
//# sourceMappingURL=/sm/945291f055535f33a5115545afefcba317918e36ce58ee424bfc032485346922.map